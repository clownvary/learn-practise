import _taggedTemplateLiteralLoose from 'babel-runtime/helpers/taggedTemplateLiteralLoose';
import _extends from 'babel-runtime/helpers/extends';

var _templateObject = _taggedTemplateLiteralLoose(['form__group\n        ', ''], ['form__group\n        ', '']),
    _templateObject2 = _taggedTemplateLiteralLoose(['form__label ', ''], ['form__label ', '']);

import React from 'react';

import { parseRules } from './validation';
import L10nMessage from '../shared/L10nMessage';
import { cls } from '../shared/utils';
import { FormFieldPropTypes } from './types';

var propTypes = _extends({}, FormFieldPropTypes);
var defaultProps = {
  rules: ''
};
/* eslint-disable jsx-a11y/label-has-for */
var VFormFieldLayout = function VFormFieldLayout(_ref) {
  var label = _ref.label,
      errMsg = _ref.errMsg,
      required = _ref.required,
      children = _ref.children,
      rules = _ref.rules;

  var parsedRules = parseRules(rules);
  var l10nMessageValues = parsedRules.reduce(function (r, rule) {
    var _extends2;

    return _extends({}, r, (_extends2 = {}, _extends2[rule.name] = rule.param, _extends2));
  }, {});

  return React.createElement(
    'div',
    {
      className: cls(_templateObject, errMsg ? 'form__group--error' : '')
    },
    React.createElement(
      'label',
      { className: cls(_templateObject2, required ? 'form__label--require' : '') },
      React.createElement(L10nMessage, { id: label })
    ),
    React.createElement(
      'div',
      { className: 'form__control' },
      children
    ),
    errMsg && React.createElement(
      'div',
      { className: 'form__validate' },
      React.createElement('i', { className: 'icon-close-circle' }),
      React.createElement(L10nMessage, { id: errMsg, values: l10nMessageValues })
    )
  );
};

VFormFieldLayout.propTypes = propTypes;
VFormFieldLayout.defaultProps = defaultProps;

export default VFormFieldLayout;