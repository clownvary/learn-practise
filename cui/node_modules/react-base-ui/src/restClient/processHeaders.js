import * as HttpMethodEnum from './consts/HttpMethodEnum';
import * as ContentTypeEnum from './consts/ContentTypeEnum';

export default function processHeaders(method, headers) {
  const contentType = {
    'Content-Type': ((__STATIC__ || method === HttpMethodEnum.POST || method === HttpMethodEnum.PUT) ? ContentTypeEnum.JSON : ContentTypeEnum.URL_ENCODED)
  };

  const requestedWidth = {
    'X-Requested-With': 'XMLHttpRequest'
  };

  const pageInfo = {
    page_info: {
      page_number: 0,
      total_records_per_page: 20
    }
  };

  // const pgInfo = Object.assign({}, pageInfo, headers.page_info);
  const finalHeaders = Object.assign({}, contentType, requestedWidth, pageInfo, headers);

  Object.keys(finalHeaders).forEach((key) => {
    if (typeof finalHeaders[key] === 'object') {
      finalHeaders[key] = JSON.stringify(finalHeaders[key]);
    }
  });

  return finalHeaders;
}
