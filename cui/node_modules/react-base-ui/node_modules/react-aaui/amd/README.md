# Active AUI

> This library contains a set of components conforming to the product styleguide for AUI for use with React.

## Table of Contents

- [Background](#background)
- [Features](#features)
- [Browser compatibility](#browser-compatibility)
- [Build](#build)
- [Installation](#install)
- [Usage](#usage)
- [Dev Env Setup](#dev-env-setup)
- [Tests](#tests)
- [Versioning](#versioning)
- [Contribute](#contribute)
- [License](#license)

## Background

Before, we craft our web app based on [arch-html](https://gitlab.dev.activenetwork.com/EnterpriseArchitecture/html) which is a JavaScript framework used by ACTIVE internal.
It's built upon RequireJS + jQuery and provide lots of reusable components. However, it's hard to maintain and custimized it depending on various requirements, so we decide to 
re-create all of the components based on React.

## Features

- It's a library, not a framework
- Declarative components (tags like HTML)
- Will not mess up your CSS
- Customized builds, use only what you need
- Customization of components styles possible
- Composable and reusable

## Browser compatibility

IE10 and above are supported.

## Build

Build `react-aaui` with **AMD**, **CommonJS** or **ES** module formats.

```bash
npm run build
```

Btw, we also support **[jsnext:main](https://github.com/rollup/rollup/wiki/jsnext:main)**.

> jsnext:main  will point to a module that has ES2015 module syntax but otherwise only syntax features that node supports.


## Install

Install `react-aaui` with npm and have your `package.json` configured like the way below:

```JavaScript

{
  "dependencies": {
    "react-aaui": "git+ssh://git@gitlab.dev.activenetwork.com:fee/react-aaui.git"
  },
  ...
}
```

Then run `npm i`.

Configure your Webpack so it:

- Loads LESS files, image files and font files
- Include `node_modules/react-aaui` in your loaders

```JavaScript
{
  ...,
  resolve: {
    extensions: ['', '.js', '.less'],
  },
  module: {
    loaders: [
      {
        test: /\.jsx?$/,
        exclude: /node_modules(?!\/react-aaui)/,
        loader: "babel",
        query: {
          presets: ["es2015", "stage-2", "react"],
          cacheDirectory: true
        }
      },
      {
        test: /\.json$/,
        exclude: /node_modules/,
        loader: 'json-loader',
      },
      {
        test: /\.(png|jpg|gif)$/,
        exclude: /node_modules(?!\/react-aaui)/,
        ...
      },
      {
        test: /\.less$/,
        exclude: /node_modules(?!\/react-aaui)/,
        ...
      },
      {
        test: /\.(eot|ttf|svg|woff|woff2)$/,
        exclude: /node_modules(?!\/react-aaui)/,
        ...
      },
      ...
    ]
  },
  ...
```

## Usage

For convenience, React AAUI exposes its full API on the top-level `react-aaui` import. However, this causes the entire React AAUI library and its dependencies to be included in client bundles that include code that imports from the top-level CommonJS bundle.

Instead, the bindings exported from `react-aaui` are also available in `react-aaui/lib`. When using CommonJS modules, you can import directly from `react-aaui/lib` to avoid pulling in unused modules.

Assuming you are transpiling ES2015 modules into CommonJS modules, instead of:

```JavaScript
import { Button, Alert, Checkbox } from 'react-aaui'
```

use:

```JavaScript
import Button from 'react-aaui/lib/Button'
import Alert from 'react-aaui/lib/Alert'
import Checkbox from 'react-aaui/lib/Checkbox'
```

The public API available in this manner is defined as the set of imports available from the top-level `react-aaui` module. Anything not available through the top-level `react-aaui` module is a private API, and is subject to change without notice.


Here is a more comprehensive sample:

```JavaScript
import { Button } from 'react-aaui'

const Foo = React.createClass({
  render() {
    <div>
      <Button type="primary" onClick={this.onClick}>My Button</Button>
    </div>
  },

  onClick(e) {
    // ...
  }
})
```

## Dev Env Setup

Clone the `react-aaui` repo and `cd` into the project folder. With [npm](https://npmjs.org/) installed, run:

```bash
git clone git@gitlab.dev.activenetwork.com:fee/react-aaui.git
cd react-aaui
npm i
```

Please notice the following points:

- Source codes are placed in the **src** directory and have to be written in **ES6**
- [LESS](http://lesscss.org/) is our CSS preprocessor, write LESS
- We use [NPM scripts](https://docs.npmjs.com/misc/scripts) as our general task automation tool
- [Webpack](http://webpack.github.io/docs/) is a module bundler for javascript and friends
- For each component you write, you have to create a respective test page under `tests` folder
- If you need to use icons(we're using [icomoon](https://icomoon.io/), ask **@kzhang** to package it or do it by yourself
- Create branches for you features and bug fixes, if a feature or bug fix is worked on with more than 1 people, then create your own branch from the feature branch again and name it with your name. E.g, if 2 people are all working on a feature `foo`, then each one has to create their own branch from `foo` named `foo-[name]` (like `foo-seth`).
- Strive to maintain a linear history with `git rebase`, the merging master will specifically ask you to do so before accepting merge requests. For details on how to do so, please take a look here: `smb://10.109.2.30/fee/trainings/git/merging-pull-requests.mp4`. If you want to learn more about interactive rebase, take a look here: `smb://10.109.2.30/fee/trainings/git/interactive-rebase.mp4`.
- ~~Special naming convention has to be followed. Every name is namespaced, be it a component name, a CSS class name, a LESS variable name or a folder name. `aaui` prefix is used following by the component's name. E.g, `aaui-tabs`, `aaui-tabs-title`, `aauiTabsActive`, `@aauiTabsBgColor`. Refer to the existing source code, and be consistent.~~
- Refer to the existing source code and project structure and be consistent.
- No jQuery. You can probably find what you need [here](http://youmightnotneedjquery.com/)
- Think twice before introducing any external libraries. They contribute on file size. You might want to find some *micro* alternatives or write it yourself

## Samples
Run the sample page with the command below:
- Caution: default generate samples for all components, have great performance issue)
```bash
npm run sample
```

## Samples for specific components

Run the sample page with the command below:

```bash
npm run sample -- --components=input,button
```

## Extract properties files to json files

Run the sample page with the command below:
```bash
PARSE_SRC=sourceDirectory PARSE_DIST=distDirectory PARSE_NAME=allInOneJsonFileName babel-node bin/parse-properties.js
```

## Test

Run the unit test with command below:

```bash
npm test
```

## Contribute

Please see [CONTRIBUTING.md](CONTRIBUTING.md).

## Versioning

For transparency into our release cycle and in striving to maintain backward compatibility, it is maintained under [the Semantic Versioning guidelines](http://semver.org/). Sometimes we screw up, but we'll adhere to those rules whenever possible.

## License

[MIT license](LICENSE).
